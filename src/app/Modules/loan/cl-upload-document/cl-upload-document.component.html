<form [formGroup]='PostDocument' (ngSubmit)="PostDocuments(PostDocument)">
  <!--<div class="kt-portlet">
    <div class="kt-portlet__head kt-portlet__head__custom" id="list-header">
      <div class="kt-portlet__head-label">
        <h5 class="kt-portlet__head-title">Loan Information</h5>
      </div>
    </div>
    <div class="kt-portlet__body">
      <div class="kt-form">
        <div class="form-group kt-form__group row">
          <div class="col-lg-3 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Zone</mat-label>

              <mat-select (selectionChange)="GetBranches($event)" formControlName="zone" [disabled]="isZoneReadOnly">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Search Zone..." (focusout)="validateZoneOnFocusOut()" (keyup)="searchZone($event.target.value)" noEntriesFoundLabel="No Zone Found">
                  </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let zone of SelectedZones" [value]="zone.ZoneId">
                  {{zone.ZoneName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-lg-3 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Branch</mat-label>

              <mat-select (selectionChange)="SetBranches($event)" formControlName="branch" [disabled]="isBranchReadOnly">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Search Branch..." (focusout)="validateBranchOnFocusOut()" noEntriesFoundLabel="No Branch Found" (keyup)="searchBranch($event.target.value)">
                  </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let branch of SelectedBranches" [value]="branch.BranchId">
                  {{branch.Name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-lg-3 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Status</mat-label>
              <input matInput formControlName="status">
            </mat-form-field>
          </div>
          <div class="col-lg-3 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Loan Type <strong class="matMandatory">*</strong></mat-label>

              <mat-select formControlName="loanTypes" (selectionChange)="onChangeLoanType($event)">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Search Loan Type..." (focusout)="validateLoanTypeOnFocusOut()" noEntriesFoundLabel="No Loan Type Found" (keyup)="searchLoanType($event.target.value)">
                  </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let loanType of SelectedLoanType" [value]="loanType.Id">
                  {{loanType.Name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-lg-3 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">LoanCase No. <strong class="matMandatory">*</strong></mat-label>
              <input matInput formControlName="loanCaseNo">
            </mat-form-field>
          </div>
          <div class="col-md-1 kt-margin-bottom-20-mobile">
            <button type="button" class="btn btn-primary mt-10p" mat-raised-button color="primary">
              Find
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>-->

  <div class="kt-portlet">
    <div class="kt-portlet__head kt-portlet__head__custom" id="list-header">
      <div class="kt-portlet__head-label">
        <h5 class="kt-portlet__head-title">Document Information</h5>
      </div>
    </div>
    <div class="kt-portlet__body">
      <div class="kt-form">
        <div class="form-group kt-form__group row">
          <div class="col-lg-4 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Document Loan Type  <strong class="matMandatory">*</strong></mat-label>
              <mat-select formControlName="DocLoanId">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Search Loan Type..." (focusout)="validateLoanTypeOnFocusOut()" noEntriesFoundLabel="No Loan Type Found" (keyup)="searchLoanType($event.target.value)">
                  </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let documentType of documentSelectedLoanType" [value]="documentType.Id">
                  {{documentType.Name }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="hasError('ParentDocId', 'required')">Parent Doc Id <strong>required</strong></mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-4 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Documents <strong class="matMandatory">*</strong></mat-label>
              <mat-select formControlName="ParentDocId">
                <mat-option>
                  <ngx-mat-select-search placeholderLabel="Search Loan Type..." (focusout)="validateLoanTypeOnFocusOut()" noEntriesFoundLabel="No Loan Type Found" (keyup)="searchLoanType($event.target.value)">
                  </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let documentType of SelectedDocument" [value]="documentType.Id">
                  {{documentType.Name }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="hasError('ParentDocId', 'required')">Parent Doc Id <strong>required</strong></mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-4 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Document Ref No. <strong class="matMandatory">*</strong></mat-label>
              <input matInput formControlName="DocumentRefNo">
              <mat-error *ngIf="hasError('DocumentRefNo', 'required')">Document Ref No <strong>required</strong></mat-error>
              <!--<mat-select formControlName="CustomerID">
        <mat-option>
          test
        </mat-option>

      </mat-select>-->
              <!--<mat-error *ngIf="hasError('ZoneId', 'required')">Zone <strong>required</strong></mat-error>-->
            </mat-form-field>
          </div>
          <div class="col-lg-4 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">No of Files to Upload<strong class="matMandatory">*</strong></mat-label>
              <input matInput formControlName="NoOfFilesToUpload">
              <mat-error *ngIf="hasError('NoOfFilesToUpload', 'required')">No Of Files To Upload <strong>required</strong></mat-error>
            </mat-form-field>
          </div>
          <div class="col-lg-12 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Description</mat-label>
              <textarea matInput placeholder="Enter Market Price" formControlName="Description"></textarea>
              <mat-error *ngIf="hasError('Description', 'required')">Document Ref No <strong>required</strong></mat-error>
              <!--<input matInput formControlName="Description">-->
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="kt-portlet">
    <div class="kt-portlet__head kt-portlet__head__custom" id="list-header">
      <div class="kt-portlet__head-label">
        <h5 class="kt-portlet__head-title">Attachments</h5>
      </div>
    </div>
    <div class="kt-portlet__body">
      <div class="kt-form">
        <div class="form-group kt-form__group row">
          <div class="col-lg-2 kt-margin-bottom-20-mobile">
            <input formControlName="file" id="file" type="file" (change)="onFileChange($event)">
          </div>
          <div class="col-lg-2 kt-margin-bottom-20-mobile">
            <mat-form-field class="mat-form-field-fluid" appearance="outline">
              <mat-label class="customMatLabel">Page No</mat-label>
              <input matInput formControlName="PageNumber">
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12">
    <button type="button" class="btn btn-primary" (click)="saveLoanDocuments()">Save</button>
  </div>

</form>


<div class="form-group kt-form__group row" style="margin-top: 2%">
  <div class="col-lg-12">
    <div class="table-responsive">
      <table class="table table-striped" *ngIf="loanDocumentArray.length !=0">
        <thead>
          <tr class="table-header-background">
            <th>Loan Type</th>
            <th>Loan Status</th>
            <th>Document Id</th>
            <th>Description</th>
            <th>Loan Case ID</th>
            <th></th>
          </tr>
        </thead>
        <tbody class="">
          <tr *ngFor="let loan of loanDocumentArray; let i = index;">
            <td>{{loan.LoanType}}</td>
            <td>{{loan.LoanStatus}}</td>
            <td>{{loan.DocumentId}}</td>
            <td>{{loan.Description}}</td>
            <td>{{loan.LoanCaseID}}</td>

            <td style="cursor: pointer; color: #ecbd00;"> <span (click)="viewDocument(loan.DocumentId, $event)">View</span> | <span (click)="deleteDocument(loan.DocumentId)" >Delete</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    
  </div>
  </div>
